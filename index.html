<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Företagskalkylator - Löner, Skatt & Utdelning 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        input[type=range] {
            height: 5px;
            -webkit-appearance: none;
            background: #e2e8f0;
            border-radius: 5px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            box-shadow: 0 0 2px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-12 text-slate-900">

    <div class="max-w-6xl mx-auto px-4 pt-8">
        <header class="mb-10 text-center flex flex-col items-center">
            <h1 class="text-4xl font-extrabold tracking-tight text-slate-900">Företagskalkylator <span class="text-blue-600">2026</span></h1>
            <p class="text-slate-500 mt-2 text-lg">Realtidsjustering för fakturering, lön och vinst</p>
            <button onclick="clearAllData()" class="mt-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest hover:text-red-500 transition-colors">
                Nollställ All Data
            </button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- Vänster kolumn: Inmatning & Info -->
            <div class="lg:col-span-4 space-y-6">
                
                <!-- Transparenta Gränsvärden Summary Box -->
                <section class="bg-slate-900 text-white p-6 rounded-2xl shadow-xl">
                    <h2 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Gränsvärden 2026
                    </h2>
                    <div class="space-y-4">
                        <div class="flex justify-between items-end border-b border-slate-700 pb-2">
                            <div>
                                <p class="text-[10px] text-slate-400 font-bold uppercase">Brytpunkt (Statlig skatt)</p>
                                <p class="text-sm font-medium">660 400 kr / år</p>
                            </div>
                            <p class="text-xs text-slate-500">55 033 kr/mån</p>
                        </div>
                        <div class="flex justify-between items-end border-b border-slate-700 pb-2">
                            <div>
                                <p class="text-[10px] text-slate-400 font-bold uppercase">Utdelningsutrymme (Schablon)</p>
                                <p class="text-sm font-medium">~322 400 kr</p>
                            </div>
                            <p class="text-xs text-slate-500">20% skatt</p>
                        </div>
                        <div class="flex justify-between items-end">
                            <div>
                                <p class="text-[10px] text-slate-400 font-bold uppercase">Bolagsskatt</p>
                                <p class="text-sm font-medium">20.6%</p>
                            </div>
                            <p class="text-[10px] text-slate-500">På vinst efter lön</p>
                        </div>
                    </div>
                </section>

                <!-- Lägg till Person -->
                <section class="glass-card p-6 rounded-2xl shadow-sm border border-slate-200">
                    <h2 class="text-lg font-semibold mb-4 flex items-center">
                        <span class="bg-blue-100 text-blue-600 p-1.5 rounded-lg mr-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>
                        </span>
                        Lägg till personal
                    </h2>
                    
                    <div class="flex p-1 bg-slate-100 rounded-lg mb-4">
                        <button id="typeConsultant" onclick="setEntryType('consultant')" class="flex-1 py-1.5 text-xs font-bold rounded-md bg-white shadow-sm transition-all">KONSULT</button>
                        <button id="typeAdmin" onclick="setEntryType('admin')" class="flex-1 py-1.5 text-xs font-bold rounded-md text-slate-500 transition-all">ADMIN/STAFF</button>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Namn</label>
                            <input type="text" id="name" placeholder="Namn" class="w-full p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                        
                        <!-- Consultant Specifics -->
                        <div id="consultantFields" class="space-y-4">
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Debiterat/tim</label>
                                    <input type="number" id="hourlyRate" value="1100" class="w-full p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Tim/v</label>
                                    <input type="number" id="hours" value="40" class="w-full p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Arbetsveckor/år</label>
                                <input type="number" id="weeks" value="45" class="w-full p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
                            </div>
                        </div>

                        <!-- General Wage Field -->
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Önskad Bruttolön/mån (kr)</label>
                            <input type="number" id="monthlySalary" value="53000" class="w-full p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm font-bold text-blue-600">
                        </div>

                        <button onclick="addEmployee()" class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors shadow-lg shadow-blue-100">
                            Lägg till i kalkyl
                        </button>
                    </div>
                </section>

                <!-- Företagskostnader -->
                <section class="glass-card p-6 rounded-2xl shadow-sm border border-slate-200">
                    <h2 class="text-lg font-semibold mb-4 flex items-center">
                        <span class="bg-red-100 text-red-600 p-1.5 rounded-lg mr-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                        </span>
                        Fasta utgifter (Månad)
                    </h2>
                    <div class="space-y-4">
                        <div class="flex gap-2">
                            <input type="text" id="costLabel" placeholder="t.ex. Hyra" class="flex-1 p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-sm">
                            <input type="number" id="costAmount" placeholder="kr" class="w-24 p-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-sm">
                        </div>
                        <button onclick="addCost()" class="w-full py-2 border border-red-200 text-red-600 hover:bg-red-50 font-bold rounded-lg transition-colors text-xs uppercase">
                            + Lägg till utgift
                        </button>
                        <div id="costsList" class="space-y-2 mt-2 max-h-40 overflow-y-auto"></div>
                    </div>
                </section>
            </div>

            <!-- Höger kolumn: Resultat -->
            <div class="lg:col-span-8 space-y-6">
                <!-- Global Summary -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1">Omsättning (År)</p>
                        <p class="text-xl font-black text-slate-800" id="totalGross">0 kr</p>
                    </div>
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1">Bolagsskatt (20.6%)</p>
                        <p class="text-xl font-black text-orange-500" id="totalCorpTax">0 kr</p>
                    </div>
                    <div class="bg-emerald-600 p-5 rounded-2xl shadow-lg shadow-emerald-100" id="profitCard">
                        <p class="text-[10px] font-bold text-emerald-100 uppercase tracking-wider mb-1">Vinst efter skatt</p>
                        <p class="text-xl font-black text-white" id="totalProfit">0 kr</p>
                    </div>
                    <div class="bg-blue-900 p-5 rounded-2xl shadow-lg shadow-blue-100">
                        <p class="text-[10px] font-bold text-blue-300 uppercase tracking-wider mb-1">Utdelningsrum (Est)</p>
                        <p class="text-xl font-black text-white" id="totalDividend">0 kr</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <h2 class="text-xl font-bold text-slate-800 px-2">Personal & Löner</h2>
                    <div id="employeeGrid" class="space-y-4"></div>
                </div>
                
                <div id="emptyState" class="text-center py-20 bg-white rounded-2xl border-2 border-dashed border-slate-200">
                    <p class="text-slate-400">Lägg till personal för att se kalkylen för 2026.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let employees = [];
        let companyCosts = [];
        let currentEntryType = 'consultant';
        
        // 2026 Constants
        const ARBETSGIVARAVGIFT = 0.3142; 
        const SKIKTGRANS_2026 = 660400; 
        const BOLAGSSKATT_RATE = 0.206;
        const SCHABLON_UTDELNING_2026 = 322400; 

        // Storage Keys
        const STORAGE_KEY_EMPLOYEES = 'payroll_tool_employees';
        const STORAGE_KEY_COSTS = 'payroll_tool_costs';

        // Initialize from LocalStorage
        window.onload = function() {
            const savedEmployees = localStorage.getItem(STORAGE_KEY_EMPLOYEES);
            const savedCosts = localStorage.getItem(STORAGE_KEY_COSTS);
            
            if (savedEmployees) employees = JSON.parse(savedEmployees);
            if (savedCosts) companyCosts = JSON.parse(savedCosts);
            
            updateCalculations();
        };

        function saveData() {
            localStorage.setItem(STORAGE_KEY_EMPLOYEES, JSON.stringify(employees));
            localStorage.setItem(STORAGE_KEY_COSTS, JSON.stringify(companyCosts));
        }

        function clearAllData() {
            if (confirm("Är du säker på att du vill nollställa all data? Detta går inte att ångra.")) {
                employees = [];
                companyCosts = [];
                saveData();
                updateCalculations();
            }
        }

        function setEntryType(type) {
            currentEntryType = type;
            const cBtn = document.getElementById('typeConsultant');
            const aBtn = document.getElementById('typeAdmin');
            const cFields = document.getElementById('consultantFields');
            
            if (type === 'consultant') {
                cBtn.className = "flex-1 py-1.5 text-xs font-bold rounded-md bg-white shadow-sm transition-all";
                aBtn.className = "flex-1 py-1.5 text-xs font-bold rounded-md text-slate-500 transition-all";
                cFields.classList.remove('hidden');
            } else {
                aBtn.className = "flex-1 py-1.5 text-xs font-bold rounded-md bg-white shadow-sm transition-all";
                cBtn.className = "flex-1 py-1.5 text-xs font-bold rounded-md text-slate-500 transition-all";
                cFields.classList.add('hidden');
            }
        }

        function addEmployee() {
            const name = document.getElementById('name').value || (currentEntryType === 'consultant' ? "Konsult" : "Admin");
            const monthlySalary = parseFloat(document.getElementById('monthlySalary').value);
            
            let data = {
                id: Date.now(),
                name,
                type: currentEntryType,
                monthlySalary,
                hourlyRate: currentEntryType === 'consultant' ? parseFloat(document.getElementById('hourlyRate').value) : 0,
                hours: currentEntryType === 'consultant' ? parseFloat(document.getElementById('hours').value) : 0,
                weeks: currentEntryType === 'consultant' ? parseFloat(document.getElementById('weeks').value) : 0,
                taxRate: 32, 
                pensionRate: 4.5 
            };

            if (isNaN(monthlySalary)) return;

            employees.push(data);
            document.getElementById('name').value = '';
            saveData();
            updateCalculations();
        }

        function removeEmployee(id) {
            employees = employees.filter(e => e.id !== id);
            saveData();
            updateCalculations();
        }

        function updateEmployeeData(id, field, val) {
            const emp = employees.find(e => e.id == id);
            if (emp) {
                emp[field] = parseFloat(val) || 0;
                saveData();
                updateCalculations();
            }
        }

        function addCost() {
            const label = document.getElementById('costLabel').value || "Utgift";
            const amount = parseFloat(document.getElementById('costAmount').value);
            if (isNaN(amount)) return;
            companyCosts.push({ id: Date.now(), label, amount });
            document.getElementById('costLabel').value = '';
            document.getElementById('costAmount').value = '';
            saveData();
            updateCalculations();
        }

        function removeCost(id) {
            companyCosts = companyCosts.filter(c => c.id !== id);
            saveData();
            updateCalculations();
        }

        function calculateNetSalary(annualBrutto, municipalTaxRate) {
            let tax = annualBrutto * municipalTaxRate;
            if (annualBrutto > SKIKTGRANS_2026) {
                tax += (annualBrutto - SKIKTGRANS_2026) * 0.20;
            }
            return annualBrutto - tax;
        }

        function updateCalculations() {
            const annualFixedCosts = companyCosts.reduce((acc, c) => acc + c.amount, 0) * 12;

            // Render Costs UI
            const costsList = document.getElementById('costsList');
            costsList.innerHTML = companyCosts.map(c => `
                <div class="flex justify-between items-center bg-white p-2 px-3 rounded-lg border border-slate-200 text-xs">
                    <span class="text-slate-600 font-medium">${c.label}</span>
                    <div class="flex items-center gap-2">
                        <span class="font-bold text-slate-800">${c.amount.toLocaleString('sv-SE')} kr</span>
                        <button onclick="removeCost(${c.id})" class="text-slate-300 hover:text-red-500"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                    </div>
                </div>
            `).join('');

            const container = document.getElementById('employeeGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (employees.length === 0) {
                emptyState.style.display = 'block';
                container.innerHTML = '';
                updateSummary(0, annualFixedCosts, 0);
                return;
            } else {
                emptyState.style.display = 'none';
            }

            let totalCompanyRevenue = 0;
            let totalPersonnelCosts = 0;

            container.innerHTML = employees.map(emp => {
                const annualGrossRevenue = emp.type === 'consultant' ? (emp.hourlyRate * emp.hours * emp.weeks) : 0;
                totalCompanyRevenue += annualGrossRevenue;
                
                const bruttolonAnnual = emp.monthlySalary * 12;
                const monthlyPension = emp.monthlySalary * (emp.pensionRate / 100);
                const annualPension = monthlyPension * 12;
                
                const totalCostToCompany = (bruttolonAnnual * (1 + ARBETSGIVARAVGIFT)) + annualPension;
                const nettolonAnnual = calculateNetSalary(bruttolonAnnual, emp.taxRate / 100);
                
                totalPersonnelCosts += totalCostToCompany;
                const isOverLimit = bruttolonAnnual > SKIKTGRANS_2026;

                return `
                    <div class="glass-card p-6 rounded-2xl shadow-sm border border-slate-200">
                        <div class="flex justify-between items-start mb-6">
                            <div class="flex items-center gap-2">
                                <span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase ${emp.type === 'consultant' ? 'bg-blue-100 text-blue-600' : 'bg-purple-100 text-purple-600'}">
                                    ${emp.type === 'consultant' ? 'Konsult' : 'Admin'}
                                </span>
                                <h3 class="font-bold text-slate-900 text-lg">${emp.name}</h3>
                            </div>
                            <button onclick="removeEmployee(${emp.id})" class="text-slate-300 hover:text-red-500 transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            </button>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                            
                            <!-- Left: Revenue/Controls -->
                            <div class="lg:col-span-4 space-y-4">
                                ${emp.type === 'consultant' ? `
                                    <div class="space-y-4">
                                        <div>
                                            <div class="flex justify-between text-[10px] font-bold text-slate-400 uppercase mb-1">
                                                <span>Timpris</span>
                                                <span class="text-blue-600">${emp.hourlyRate} kr</span>
                                            </div>
                                            <input type="range" min="300" max="3000" step="25" value="${emp.hourlyRate}" 
                                                   oninput="updateEmployeeData(${emp.id}, 'hourlyRate', this.value)" class="w-full">
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-[10px] font-bold text-slate-400 uppercase mb-1">
                                                <span>Timmar/v</span>
                                                <span class="text-blue-600">${emp.hours} h</span>
                                            </div>
                                            <input type="range" min="0" max="80" step="1" value="${emp.hours}" 
                                                   oninput="updateEmployeeData(${emp.id}, 'hours', this.value)" class="w-full">
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-[10px] font-bold text-slate-400 uppercase mb-1">
                                                <span>Veckor/år</span>
                                                <span class="text-blue-600">${emp.weeks} v</span>
                                            </div>
                                            <input type="range" min="0" max="52" step="1" value="${emp.weeks}" 
                                                   oninput="updateEmployeeData(${emp.id}, 'weeks', this.value)" class="w-full">
                                        </div>
                                        <div class="p-3 bg-blue-50 rounded-xl border border-blue-100">
                                            <p class="text-[10px] font-bold text-blue-400 uppercase">Årlig Omsättning</p>
                                            <p class="text-lg font-black text-blue-700">${Math.round(annualGrossRevenue).toLocaleString('sv-SE')} kr</p>
                                        </div>
                                    </div>
                                ` : `
                                    <div class="h-full flex items-center justify-center border-2 border-dashed border-slate-100 rounded-xl p-4 text-center">
                                        <div>
                                            <p class="text-xs text-slate-400 font-medium italic mb-1">Admin Resurs</p>
                                            <p class="text-[10px] text-slate-400 uppercase tracking-tighter">Finansieras av omsättning</p>
                                        </div>
                                    </div>
                                `}
                            </div>

                            <!-- Middle: Salary, Tax & Pension Breakdown -->
                            <div class="lg:col-span-4 space-y-4 border-l border-slate-100 pl-4 lg:pl-8">
                                <div>
                                    <label class="text-[10px] font-bold text-slate-400 uppercase block mb-1">Bruttolön /mån</label>
                                    <div class="relative mb-2">
                                        <input type="number" value="${emp.monthlySalary}" 
                                               onchange="updateEmployeeData(${emp.id}, 'monthlySalary', this.value)"
                                               class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold focus:ring-2 focus:ring-blue-500 outline-none">
                                        <span class="absolute right-3 top-2.5 text-slate-400 text-xs font-bold">kr</span>
                                    </div>
                                    <input type="range" min="10000" max="150000" step="500" value="${emp.monthlySalary}" 
                                           oninput="updateEmployeeData(${emp.id}, 'monthlySalary', this.value)" class="w-full">
                                </div>
                                <div class="space-y-4 pt-2">
                                    <div>
                                        <div class="flex justify-between text-[10px] font-bold text-slate-400 uppercase mb-1">
                                            <span>Skattesats (Kommun)</span>
                                            <span class="text-blue-600">${emp.taxRate}%</span>
                                        </div>
                                        <input type="range" min="25" max="45" value="${emp.taxRate}" 
                                               oninput="updateEmployeeData(${emp.id}, 'taxRate', this.value)" class="w-full">
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-[10px] font-bold text-slate-400 uppercase mb-1">
                                            <span>Tjänstepension</span>
                                            <span class="text-blue-600">${emp.pensionRate}%</span>
                                        </div>
                                        <input type="range" min="0" max="30" step="0.5" value="${emp.pensionRate}" 
                                               oninput="updateEmployeeData(${emp.id}, 'pensionRate', this.value)" class="w-full">
                                    </div>
                                </div>
                            </div>

                            <!-- Right: Take-Home Result -->
                            <div class="lg:col-span-4">
                                <div class="bg-blue-600 p-5 rounded-2xl text-white shadow-xl shadow-blue-100 h-full flex flex-col justify-center">
                                    <p class="text-[10px] uppercase font-bold text-blue-200 tracking-wider mb-1">Utbetalt Netto /mån</p>
                                    <div class="flex items-baseline gap-1">
                                        <span class="text-3xl font-black">${Math.round(nettolonAnnual/12).toLocaleString('sv-SE')} kr</span>
                                    </div>
                                    <div class="mt-3 pt-3 border-t border-blue-500 flex flex-col gap-1">
                                        <div class="flex justify-between text-[10px]">
                                            <span class="text-blue-100">Pension: ${Math.round(monthlyPension).toLocaleString('sv-SE')} kr/mån</span>
                                            <span class="text-blue-100">Kostnad: ${Math.round(totalCostToCompany/12).toLocaleString('sv-SE')} kr/mån</span>
                                        </div>
                                        ${isOverLimit ? '<div class="mt-2"><span class="px-2 py-0.5 bg-amber-400 text-[9px] font-black rounded text-amber-900">STATLIG SKATT</span></div>' : ''}
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                `;
            }).join('');

            const profitBeforeTax = totalCompanyRevenue - totalPersonnelCosts - annualFixedCosts;
            updateSummary(totalCompanyRevenue, totalPersonnelCosts + annualFixedCosts, profitBeforeTax);
        }

        function updateSummary(gross, costs, profitBeforeTax) {
            const corpTax = profitBeforeTax > 0 ? profitBeforeTax * BOLAGSSKATT_RATE : 0;
            const netProfit = profitBeforeTax - corpTax;
            const dividendRoom = Math.min(netProfit, SCHABLON_UTDELNING_2026);

            document.getElementById('totalGross').innerText = Math.round(gross).toLocaleString('sv-SE') + ' kr';
            document.getElementById('totalCorpTax').innerText = Math.round(corpTax).toLocaleString('sv-SE') + ' kr';
            document.getElementById('totalProfit').innerText = Math.round(netProfit).toLocaleString('sv-SE') + ' kr';
            document.getElementById('totalDividend').innerText = (dividendRoom > 0 ? Math.round(dividendRoom) : 0).toLocaleString('sv-SE') + ' kr';
            
            const profitCard = document.getElementById('profitCard');
            if (netProfit < 0) {
                profitCard.className = 'bg-red-600 p-5 rounded-2xl shadow-lg shadow-red-100 transition-colors';
            } else {
                profitCard.className = 'bg-emerald-600 p-5 rounded-2xl shadow-lg shadow-emerald-100 transition-colors';
            }
        }
    </script>
</body>
</html>
